# Configuration file for queue server mappings
# Include this in your nginx.conf with: include /path/to/queue_servers.conf;

# Set the queue server URL based on environment or include
# This file can be generated dynamically or maintained manually

# For environment variable approach:
# set $queue_server_url $QUEUE_SERVER_URL;

# For static configuration per deployment:
set $queue_server_url https://actual-queueserver-for-this-beamline.bnl.gov:443;

# Alternative: Use a Lua script for dynamic lookup
# lua_code_cache off;
# lua_package_path "/path/to/lua/?.lua;;";

# lua_code {
#     local queue_servers = {
#         ["beamline1.nsls2.bnl.gov"] = "https://queue-bl1.bnl.gov:443",
#         ["beamline2.nsls2.bnl.gov"] = "https://queue-bl2.bnl.gov:443",
#         -- Add all 30+ mappings here
#     }
#
#     local backend = queue_servers[ngx.var.http_host] or "https://default-queue.bnl.gov:443"
#     ngx.var.queue_server_url = backend
# }